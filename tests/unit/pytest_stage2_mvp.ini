# MVP Stage 2 Test Configuration
# This file configures pytest specifically for Stage 2 MVP testing
# to ensure < 3 minute execution and < 50MB memory usage targets

[tool.pytest.ini_options]
# Test discovery
python_files = ["test_stage_2_mvp.py"]
python_classes = ["TestStage2*"]
python_functions = ["test_*"]

# Output and reporting
addopts = [
    "-v",                    # Verbose output
    "--tb=short",           # Short traceback format
    "-x",                   # Stop on first failure (MVP speed)
    "--durations=10",       # Show 10 slowest tests
    "--strict-markers",     # Strict marker enforcement
    "--disable-warnings",   # Suppress warnings for speed
    "--no-header",          # No pytest header (faster)
    "--quiet",              # Less verbose for CI
]

# Test markers for MVP categorization
markers = [
    "mvp: MVP critical functionality tests",
    "stage2: Stage 2 specific tests", 
    "audio: Audio download tests",
    "video: Video download tests",
    "integration: Integration tests",
    "performance: Performance validation tests",
    "slow: Slow running tests (>5s)",
    "network: Tests requiring network access",
]

# Timeout settings (MVP target: <3 minutes total)
timeout = 180  # 3 minutes total timeout

# Test execution order
testpaths = ["tests/unit"]

# Filtering
filterwarnings = [
    "ignore::DeprecationWarning",
    "ignore::PendingDeprecationWarning",
    "ignore::pytest.PytestUnraisableExceptionWarning",
]

# Minimum version requirements  
minversion = "6.0"

# Cache configuration for speed
cache_dir = ".pytest_cache"
